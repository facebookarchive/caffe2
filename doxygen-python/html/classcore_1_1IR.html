<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Caffe2 - Python API: core.IR Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="/static/favicon.png" type="image/x-icon">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
<link href="main.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo" width="56"><a href="/"><img alt="Logo" src="Caffe2-with-name-55-tall.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Caffe2 - Python API
   </div>
   <div id="projectbrief">A deep learning, cross platform ML framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.html','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecore.html">core</a></li><li class="navelem"><a class="el" href="classcore_1_1IR.html">IR</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classcore_1_1IR-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">core.IR Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for core.IR:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classcore_1_1IR.png" usemap="#core.IR_map" alt=""/>
  <map id="core.IR_map" name="core.IR_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a88033193fee257bc79d92d65efab7e6c"><td class="memItemLeft" align="right" valign="top"><a id="a88033193fee257bc79d92d65efab7e6c"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b> (self, operators)</td></tr>
<tr class="separator:a88033193fee257bc79d92d65efab7e6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a596b5653e73bc18c631431ae63c3fc10"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcore_1_1IR.html#a596b5653e73bc18c631431ae63c3fc10">Play</a> (self, op)</td></tr>
<tr class="separator:a596b5653e73bc18c631431ae63c3fc10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c8ef53797f3a0601e7d741927851122"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcore_1_1IR.html#a9c8ef53797f3a0601e7d741927851122">CheckGradientOperatorInput</a> (self, grad_op_input, g_output, fwd_op_idx, locally_generated_blobs)</td></tr>
<tr class="separator:a9c8ef53797f3a0601e7d741927851122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a076c61035d2825b393bea069160b389e"><td class="memItemLeft" align="right" valign="top"><a id="a076c61035d2825b393bea069160b389e"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>AppendSparseGenerators</b> (self, sparse_generators)</td></tr>
<tr class="separator:a076c61035d2825b393bea069160b389e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fe337e136e7a0c259eaa7a466c18b97"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcore_1_1IR.html#a2fe337e136e7a0c259eaa7a466c18b97">BuildGradientGenerators</a> (self, fwd_op_idx, gradient_ops, g_output, g_input)</td></tr>
<tr class="separator:a2fe337e136e7a0c259eaa7a466c18b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a507a82eb945ef3ab9878472a29acf244"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcore_1_1IR.html#a507a82eb945ef3ab9878472a29acf244">DoGradientAccumulation</a> (self, fwd_op_idx)</td></tr>
<tr class="separator:a507a82eb945ef3ab9878472a29acf244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af64e8de2e61caa941bccf6dfb1ecfb76"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcore_1_1IR.html#af64e8de2e61caa941bccf6dfb1ecfb76">GetBackwardPass</a> (self, ys)</td></tr>
<tr class="separator:af64e8de2e61caa941bccf6dfb1ecfb76"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a7d3c0e121a0414bf6cde99cbf3e4a934"><td class="memItemLeft" align="right" valign="top"><a id="a7d3c0e121a0414bf6cde99cbf3e4a934"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ssa</b></td></tr>
<tr class="separator:a7d3c0e121a0414bf6cde99cbf3e4a934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8a0b78cafa5e52bf7e6bb442e3fe696"><td class="memItemLeft" align="right" valign="top"><a id="aa8a0b78cafa5e52bf7e6bb442e3fe696"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>input_usages</b></td></tr>
<tr class="separator:aa8a0b78cafa5e52bf7e6bb442e3fe696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a609f2288e6bba939f7f3bbf3badb3133"><td class="memItemLeft" align="right" valign="top"><a id="a609f2288e6bba939f7f3bbf3badb3133"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>frontier</b></td></tr>
<tr class="separator:a609f2288e6bba939f7f3bbf3badb3133"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a621d9860fb5f7b08bf6982c96e894593"><td class="memItemLeft" align="right" valign="top"><a id="a621d9860fb5f7b08bf6982c96e894593"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>gradient_frontier</b></td></tr>
<tr class="separator:a621d9860fb5f7b08bf6982c96e894593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20a9ab521c4d4554f0b50cbf93f60119"><td class="memItemLeft" align="right" valign="top"><a id="a20a9ab521c4d4554f0b50cbf93f60119"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>gradient_generators</b></td></tr>
<tr class="separator:a20a9ab521c4d4554f0b50cbf93f60119"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">A simple IR class to keep track of all intermediate representations used
in the gradient computation.
</pre> 
<p class="definition">Definition at line <a class="el" href="core_8py_source.html#l00358">358</a> of file <a class="el" href="core_8py_source.html">core.py</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a2fe337e136e7a0c259eaa7a466c18b97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fe337e136e7a0c259eaa7a466c18b97">&#9670;&nbsp;</a></span>BuildGradientGenerators()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def core.IR.BuildGradientGenerators </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fwd_op_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>gradient_ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>g_output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>g_input</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Updates gradient_generators and gradient_frontier</pre> 
<p class="definition">Definition at line <a class="el" href="core_8py_source.html#l00483">483</a> of file <a class="el" href="core_8py_source.html">core.py</a>.</p>

</div>
</div>
<a id="a9c8ef53797f3a0601e7d741927851122"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c8ef53797f3a0601e7d741927851122">&#9670;&nbsp;</a></span>CheckGradientOperatorInput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def core.IR.CheckGradientOperatorInput </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>grad_op_input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>g_output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fwd_op_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>locally_generated_blobs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Checks if the gradient operators can be correctly carried out.</pre> 
<p class="definition">Definition at line <a class="el" href="core_8py_source.html#l00410">410</a> of file <a class="el" href="core_8py_source.html">core.py</a>.</p>

</div>
</div>
<a id="a507a82eb945ef3ab9878472a29acf244"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a507a82eb945ef3ab9878472a29acf244">&#9670;&nbsp;</a></span>DoGradientAccumulation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def core.IR.DoGradientAccumulation </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fwd_op_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">For each input name in the forward op, check if we will need to
add gradient accumulation. If so, do gradient accumulation and return
the list of gradient operators.

The criteria for doing gradient accumulation is:
(1) the specific input version has been used by multiple operators.
(2) the current fwd_op_idx is the first to use that input, i.e. in the
    backward pass, is the last to optionally generate the gradient for
    the op.
(3) For the operators that used the input, their gradient operators
    have generated more than 1 gradient.

When accumulating operators, our current solution is to rename all the
created gradients with an internal intermediate name, and then add a
Sum() operator that adds up all the gradients. This may use more memory
due to intermediate storage, but is usually the fastest approach as one
can do one single sum for multiple intermediate gradients.
</pre> 
<p class="definition">Definition at line <a class="el" href="core_8py_source.html#l00725">725</a> of file <a class="el" href="core_8py_source.html">core.py</a>.</p>

</div>
</div>
<a id="af64e8de2e61caa941bccf6dfb1ecfb76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af64e8de2e61caa941bccf6dfb1ecfb76">&#9670;&nbsp;</a></span>GetBackwardPass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def core.IR.GetBackwardPass </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ys</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Gets the backward pass that computes the derivatives of given blobs.

Inputs:
  ys: a list or a dictionary specifying what blobs we want to compute
      derivatives of. If the input is a list, we will automatically
      generate their gradients with all-one values; if the input is a
      dictionary, for any dictionary entries that are not None, we will
      take the corresponding blobs as their gradients; for all those
      that are None, we will auto-fill them with 1.
</pre> 
<p class="definition">Definition at line <a class="el" href="core_8py_source.html#l00816">816</a> of file <a class="el" href="core_8py_source.html">core.py</a>.</p>

</div>
</div>
<a id="a596b5653e73bc18c631431ae63c3fc10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a596b5653e73bc18c631431ae63c3fc10">&#9670;&nbsp;</a></span>Play()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def core.IR.Play </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>op</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">"Adds an op to the current IR, and update the internal states to
reflect the blobs and versions after the execution of the op.
</pre> 
<p class="definition">Definition at line <a class="el" href="core_8py_source.html#l00390">390</a> of file <a class="el" href="core_8py_source.html">core.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>caffe2/python/<a class="el" href="core_8py_source.html">core.py</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 18 2017 14:26:54 for Caffe2 - Python API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
<div class="footerContainer">
  <div id="footer_wrap" class="wrapper footerWrapper">
    <div class="footerBlocks">
      <div id="fb_oss" class="footerSection fbOpenSourceFooter">
          <svg class="facebookOSSLogoSvg" viewBox="0 0 1133.9 1133.9" x="0px" y="0px" height=50 width=50>
            <g>
              <path class="logoRing outerRing" d="M 498.3 3.7 c 153.6 88.9 307.3 177.7 461.1 266.2 c 7.6 4.4 10.3 9.1 10.3 17.8 c -0.3 179.1 -0.2 358.3 0 537.4 c 0 8.1 -2.4 12.8 -9.7 17.1 c -154.5 88.9 -308.8 178.1 -462.9 267.5 c -9 5.2 -15.5 5.3 -24.6 0.1 c -153.9 -89.2 -307.9 -178 -462.1 -266.8 C 3 838.8 0 833.9 0 825.1 c 0.3 -179.1 0.2 -358.3 0 -537.4 c 0 -8.6 2.6 -13.6 10.2 -18 C 164.4 180.9 318.4 92 472.4 3 C 477 -1.5 494.3 -0.7 498.3 3.7 Z M 48.8 555.3 c 0 79.9 0.2 159.9 -0.2 239.8 c -0.1 10 3 15.6 11.7 20.6 c 137.2 78.8 274.2 157.8 411 237.3 c 9.9 5.7 17 5.7 26.8 0.1 c 137.5 -79.8 275.2 -159.2 412.9 -238.5 c 7.4 -4.3 10.5 -8.9 10.5 -17.8 c -0.3 -160.2 -0.3 -320.5 0 -480.7 c 0 -8.8 -2.8 -13.6 -10.3 -18 C 772.1 218 633.1 137.8 494.2 57.4 c -6.5 -3.8 -11.5 -4.5 -18.5 -0.5 C 336.8 137.4 197.9 217.7 58.8 297.7 c -7.7 4.4 -10.2 9.2 -10.2 17.9 C 48.9 395.5 48.8 475.4 48.8 555.3 Z" />
              <path class="logoRing middleRing" d="M 184.4 555.9 c 0 -33.3 -1 -66.7 0.3 -100 c 1.9 -48 24.1 -86 64.7 -110.9 c 54.8 -33.6 110.7 -65.5 167 -96.6 c 45.7 -25.2 92.9 -24.7 138.6 1 c 54.4 30.6 108.7 61.5 162.2 93.7 c 44 26.5 67.3 66.8 68 118.4 c 0.9 63.2 0.9 126.5 0 189.7 c -0.7 50.6 -23.4 90.7 -66.6 116.9 c -55 33.4 -110.8 65.4 -167.1 96.5 c -43.4 24 -89 24.2 -132.3 0.5 c -57.5 -31.3 -114.2 -64 -170 -98.3 c -41 -25.1 -62.9 -63.7 -64.5 -112.2 C 183.5 621.9 184.3 588.9 184.4 555.9 Z M 232.9 556.3 c 0 29.5 0.5 59.1 -0.1 88.6 c -0.8 39.2 16.9 67.1 50.2 86.2 c 51.2 29.4 102.2 59.2 153.4 88.4 c 31.4 17.9 63.6 18.3 95 0.6 c 53.7 -30.3 107.1 -61.2 160.3 -92.5 c 29.7 -17.5 45 -44.5 45.3 -78.8 c 0.6 -61.7 0.5 -123.5 0 -185.2 c -0.3 -34.4 -15.3 -61.5 -44.9 -79 C 637.7 352.6 583 320.8 527.9 290 c -27.5 -15.4 -57.2 -16.1 -84.7 -0.7 c -56.9 31.6 -113.4 64 -169.1 97.6 c -26.4 15.9 -40.7 41.3 -41.1 72.9 C 232.6 491.9 232.9 524.1 232.9 556.3 Z" />
              <path class="logoRing innerRing" d="M 484.9 424.4 c 69.8 -2.8 133.2 57.8 132.6 132 C 617 630 558.5 688.7 484.9 689.1 c -75.1 0.4 -132.6 -63.6 -132.7 -132.7 C 352.1 485 413.4 421.5 484.9 424.4 Z M 401.3 556.7 c -3.4 37.2 30.5 83.6 83 84.1 c 46.6 0.4 84.8 -37.6 84.9 -84 c 0.1 -46.6 -37.2 -84.4 -84.2 -84.6 C 432.2 472.1 397.9 518.3 401.3 556.7 Z" />
            </g>
          </svg>
        <h2>Facebook Open Source</h2>
      </div>
      <div class="footerSection">
        <a class="footerLink" href="https://code.facebook.com/projects/" target="_blank">Open Source Projects</a>
        <a class="footerLink" href="https://github.com/facebook/" target="_blank">GitHub</a>
        <a class="footerLink" href="https://twitter.com/fbOpenSource" target="_blank">Twitter</a>
      </div>
      <div class="footerSection rightAlign">
        <a class="footerLink" href="https://github.com/caffe2/caffe2" target="_blank">Contribute to this project on GitHub</a>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript" src="/js/jekyll-link-anchors.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', '{{ site.gacode }}', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
